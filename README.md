# Photo Watermark 2

## 项目简介

Photo Watermark 2 是一款功能强大的本地图片水印应用程序，支持在 Windows 和 MacOS 操作系统上运行。该应用程序允许用户轻松地为图片添加文本水印，并提供丰富的自定义选项来满足各种水印需求。

## 功能概述

### 1. 图片文件处理

#### 1.1 图片导入

* ✅ 支持单张图片拖拽或通过文件选择器导入
* ✅ 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
* ✅ 在界面上显示已导入图片的列表（缩略图和文件名），方便用户快速预览和管理

#### 1.2 支持格式

* ✅ **输入格式**：支持主流图片格式，包括 JPEG、PNG、TIFF。其中 PNG 格式完全支持透明通道
* ✅ **输出格式**：用户可选择将处理后的图片导出为 JPEG 或 PNG 格式
* ❌ **不支持**：暂不支持 BMP 格式

#### 1.3 导出图片

* ✅ 用户可指定一个输出文件夹，默认禁止导出到原文件夹以防止覆盖原图
* ✅ 提供灵活的导出文件命名规则选项：
  * 保留原文件名
  * 添加自定义前缀（如 wm_）
  * 添加自定义后缀（如 _watermarked）
* ✅ 对于 JPEG 格式，提供图片质量（压缩率）调节滑块（1-100）
* ✅ 导出时允许用户调整图片尺寸（按百分比缩放）
* ✅ 支持批量导出所有已导入的图片，每张图片都应用相同的水印设置
* ✅ 导出时保留原图片尺寸，不会添加额外的黑边

### 2. 水印类型

#### 2.1 文本水印

* ✅ **内容**：用户可自定义输入任意文本作为水印内容
* ✅ **字体**：可选择系统已安装的字体、字号，并支持粗体、斜体等样式设置
* ✅ **颜色**：提供调色板让用户选择字体颜色，支持各种颜色组合
* ✅ **透明度**：可调节文本的透明度（0-100%），满足不同场景需求
* ✅ **样式**：可添加阴影或描边效果，以增强在复杂背景下的可读性

#### 2.2 图片水印

* ❌ **暂未支持**：图片水印功能正在开发中

### 3. 水印布局与样式

#### 3.1 实时预览

* ✅ 所有对水印的调整都应在主预览窗口中实时显示效果
* ✅ 用户可以点击图片列表切换预览不同的图片，查看水印效果

#### 3.2 位置

* ✅ **预设位置**：提供九宫格布局（四角、正中心），用户可一键将水印放置在这些位置
* ✅ **手动拖拽**：用户可以直接在预览图上通过鼠标拖拽水印到任意位置

#### 3.3 旋转

* ✅ 提供一个滑块或输入框，允许用户以任意角度旋转水印

### 4. 配置管理

#### 4.1 水印模板

* ✅ 用户可以将当前的水印设置（包括水印内容、字体、颜色、位置、大小、透明度等所有参数）保存为一个模板
* ✅ 用户可以加载、管理和删除已保存的模板
* ✅ 程序启动时可自动加载上一次关闭时的设置或一个默认模板

## 技术实现

* 基于 Electron 框架开发，实现跨平台兼容
* 使用 Canvas API 进行图片处理和水印绘制
* 通过 IPC 通信在渲染进程和主进程之间传递数据和执行文件操作
* 采用 JSON 格式存储水印模板配置

## 注意事项

* 为防止意外覆盖原始图片，应用默认禁止导出到原始图片所在文件夹
* 批量导出功能会为所有已导入图片应用相同的水印设置
* 导出时会自动保留原始图片尺寸，不会添加额外的黑边或背景
* 暂不支持 BMP 格式和图片水印功能

## 使用流程

### 1. 图片导入与管理

#### 1.1 单张图片导入
- **拖拽导入**：将单个图片文件直接拖拽到应用程序主窗口的图片列表区域
- **文件选择器导入**：
  1. 点击界面上的"导入图片"按钮
  2. 在弹出的文件选择对话框中，浏览并选择要导入的图片文件
  3. 点击"打开"按钮完成导入

#### 1.2 批量导入
- **多选导入**：
  1. 点击"导入图片"按钮
  2. 在文件选择对话框中，按住Ctrl键（Windows）或Command键（MacOS）选择多个图片文件
  3. 点击"打开"按钮一次性导入所有选中的图片
- **文件夹导入**：
  1. 点击"导入文件夹"按钮
  2. 在弹出的文件夹选择对话框中，选择包含图片的文件夹
  3. 点击"确定"按钮导入该文件夹中的所有支持格式的图片

#### 1.3 图片列表管理
- 导入的图片会以缩略图和文件名的形式显示在图片列表区域
- 点击任意图片缩略图，可在主预览窗口中查看该图片的水印效果
- 图片列表支持滚动查看所有已导入的图片

### 2. 水印设置与调整

#### 2.1 文本水印设置
- **输入水印内容**：在界面上方的文本输入框中输入您想要添加的水印文本
- **字体设置**：
  1. 从字体下拉菜单中选择系统已安装的字体
  2. 通过字号输入框或滑块调整水印文字大小
  3. 勾选"粗体"和/或"斜体"复选框，为水印添加相应样式
- **颜色设置**：
  1. 点击颜色选择器按钮
  2. 在弹出的调色板中选择喜欢的颜色
  3. 点击确认按钮应用所选颜色
- **透明度调整**：通过透明度滑块或输入框（0-100%）调整水印的透明程度
- **样式效果**：
  1. 勾选"阴影"复选框，为水印添加阴影效果，增强可读性
  2. 勾选"描边"复选框，为水印文字添加描边效果

#### 2.2 水印位置调整
- **预设位置**：点击九宫格位置按钮（左上、中上、右上、左中、中心、右中、左下、中下、右下），一键将水印放置到对应位置
- **手动拖拽**：
  1. 将鼠标指针悬停在预览窗口中的水印上
  2. 按住鼠标左键并拖动，将水印移动到所需位置
  3. 释放鼠标左键完成位置调整

#### 2.3 水印旋转
- 使用旋转角度滑块或输入框，设置水印的旋转角度（0-360度）
- 调整时，预览窗口中的水印会实时显示旋转效果

### 3. 预览与确认

- 所有对水印的调整都会在主预览窗口中实时显示效果
- 点击图片列表中的不同图片，可切换预览不同图片的水印效果
- 确认水印效果满意后，可进行下一步的导出设置

### 4. 导出设置与执行

#### 4.1 导出参数设置
- **输出格式选择**：从下拉菜单中选择导出格式（JPEG 或 PNG）
- **JPEG质量调整**：如果选择JPEG格式，可通过质量滑块（1-100）调整图片压缩质量
- **尺寸调整**：通过缩放百分比滑块或输入框，设置导出图片的尺寸（相对于原图）

#### 4.2 文件命名规则设置
- **保留原文件名**：选择此选项，导出文件将使用与原文件相同的名称
- **添加前缀**：勾选此选项并在输入框中输入前缀文本（如 wm_），导出文件名将添加该前缀
- **添加后缀**：勾选此选项并在输入框中输入后缀文本（如 _watermarked），导出文件名将添加该后缀

#### 4.3 输出文件夹选择
- 点击"选择输出文件夹"按钮
- 在弹出的文件夹选择对话框中，浏览并选择导出图片的保存位置
- 点击"确定"按钮完成输出文件夹设置
- 系统会自动检测并禁止选择原始图片所在文件夹，以防止意外覆盖原图

#### 4.4 执行导出
- **单张导出**：确保图片列表中选中的是要导出的图片，点击"导出"按钮
- **批量导出**：点击"批量导出"按钮，系统会自动为所有已导入图片应用当前水印设置并导出
- 导出完成后，系统会显示导出成功提示，并可选择打开输出文件夹查看结果

### 5. 模板管理

#### 5.1 保存模板
- 调整好水印设置后，点击"保存模板"按钮
- 在弹出的对话框中输入模板名称
- 点击"确认"按钮，当前水印设置将作为模板保存

#### 5.2 加载模板
- 点击"加载模板"按钮
- 在弹出的模板列表中选择一个已保存的模板
- 点击"确定"按钮，系统会应用所选模板的所有水印设置

#### 5.3 管理模板
- 点击"管理模板"按钮
- 在模板管理界面中，可以查看、重命名或删除已保存的模板
- 完成操作后，点击"关闭"按钮返回主界面
